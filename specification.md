# インシデント分析ダッシュボード 外部仕様書

## 1. 概要
本アプリケーションは、システム障害やインシデントの発生原因、事象、影響、対応策を可視化・分析するためのダッシュボードです。インシデントごとに詳細な分析を行い、各要素間の関係性を視覚的に整理することができます。

## 2. 画面構成

アプリケーションは主に以下の2つの画面で構成されています。

1.  **インシデント一覧画面 (ルートページ)**
2.  **分析ダッシュボード画面 (詳細ページ)**

### 2.1 共通ヘッダー
全画面共通で上部にヘッダーが表示されます。
*   **タイトル**: "Incident Analysis Dashboard" (クリックすると一覧画面へ遷移)
*   **ページ固有要素**: 各画面に応じたタイトルやボタンが右側に配置されます。

---

### 2.2 インシデント一覧画面 (ルートページ)
アプリケーションのトップページです。登録済みのインシデントを一覧表示し、新規作成や検索を行います。

#### 画面レイアウト
*   **検索バー**: インシデントのタイトルで検索が可能（インクリメンタルサーチ、デバウンス機能付き）。
*   **新規作成ボタン**: "New Incident" ボタン。クリックすると作成モーダルが表示されます。
*   **インシデントリスト**:
    *   カード形式でインシデントを表示。
    *   表示項目: ID、タイトル、発生日時。
    *   クリックすると該当インシデントのダッシュボード画面へ遷移します。
*   **ページネーション**:
    *   リスト下部にページ送り機能を配置。
    *   "<<" (最初へ), "<" (前へ), ページ番号 (1, 2, 3...), ">" (次へ) のボタンで構成。
    *   1ページあたりの表示件数は10件。

#### 新規作成モーダル
"New Incident" ボタン押下時に表示されます。
*   **タイトル入力**: インシデントの名称を入力。
*   **発生日時入力**: インシデントの発生日時を選択 (デフォルトは現在時刻)。
*   **Createボタン**: 入力内容でインシデントを作成し、作成されたダッシュボード画面へ遷移します。

---

### 2.3 分析ダッシュボード画面 (詳細ページ)
特定のインシデントに対する詳細分析を行う画面です。4つのカラムに分類されたアイテムを配置し、それらを線で結ぶことで因果関係などを表現します。

#### 画面レイアウト
*   **ヘッダー下部**: インシデントのタイトルが表示されます。
*   **メインエリア**: 以下の4つのカラムが左から順に配置されます。
    1.  **原因 (Cause)**
    2.  **事象 (Event)**
    3.  **影響 (Impact)**
    4.  **対応 (Response)**

#### アイテム (カード)
各カラムには「アイテム」と呼ばれるカードを追加できます。
*   **表示内容**:
    *   タイトル
    *   ステータス (バッジ表示: オープン, クローズ, 未着手, 進行中, 完了)
    *   ランク (影響カラムのみ: Rank A/B/C)
    *   詳細情報:
        *   発生日時 (原因・事象・影響)
        *   期限 (対応)
        *   システム名
        *   担当者 (対応)
    *   説明文 (Description)
*   **操作**:
    *   **クリック**: 編集フォームを表示。
    *   **ドラッグ&ドロップ (接続)**: アイテム左右のハンドルをドラッグし、隣接するカラムのアイテムにドロップすることでリレーションシップ（接続線）を作成します。

#### リレーションシップ (接続線)
アイテム間の関係を黒い実線で表現します。
*   **接続ルール**: 隣接するカラム間でのみ接続が可能 (例: 原因→事象、事象→影響)。
*   **削除**: 線をクリックすると削除確認モーダルが表示され、削除できます。

#### アイテム作成・編集フォーム
アイテムの追加ボタン(+)または既存アイテムクリック時に表示されます。
*   **入力項目**:
    *   タイトル (必須)
    *   ステータス (選択式)
    *   システム名
    *   発生日時 / 期限 (タイプにより変化)
    *   ランク (影響のみ)
    *   担当者 (対応のみ)
    *   説明文
*   **削除ボタン**: 編集時のみ表示。アイテムを削除できます。

---

## 3. データモデル

### 3.1 Incident (インシデント)
分析の単位となる事象全体を管理します。
*   **ID**: 一意の識別子
*   **Title**: インシデント名
*   **Date**: 発生日
*   **CreatedAt**: 作成日時
*   **Items**: 紐づくアイテムのリスト

### 3.2 Item (アイテム)
分析の構成要素です。4つのタイプに分類されます。
*   **Type**: CAUSE (原因), EVENT (事象), IMPACT (影響), RESPONSE (対応)
*   **Common Attributes**:
    *   Title (タイトル)
    *   Status (ステータス)
    *   SystemName (システム名)
    *   Description (詳細説明)
*   **Specific Attributes**:
    *   OccurredAt (発生日時): CAUSE, EVENT, IMPACTで使用
    *   Rank (ランク): IMPACTで使用 (A, B, C)
    *   Deadline (期限): RESPONSEで使用
    *   Assignee (担当者): RESPONSEで使用

### 3.3 Relationship (リレーションシップ)
アイテム間の接続関係を管理します。
*   **FromItemId**: 接続元アイテムID
*   **ToItemId**: 接続先アイテムID
*   **制約**: UI操作では隣接するカラム間でのみ接続が可能ですが、関係線に方向性はなく、接続元と接続先が逆でも同一の関係とみなされます。

## 4. デザイン・スタイル
*   **配色**:
    *   プライマリカラー: 青系 (ボタン、アクティブなページネーション)
    *   ステータスカラー:
        *   オープン: 赤系
        *   クローズ: グレー系
        *   進行中: 青
    *   ランクカラー:
        *   Rank A: 赤 (高重要度)
        *   Rank B: オレンジ
        *   Rank C: 黄
*   **インタラクション**:
    *   ホバー時のスタイル変化 (ボタン、カード)。
    *   モーダルによるフォーカスされた入力体験。
    *   SVGを用いた動的なライン描画。
